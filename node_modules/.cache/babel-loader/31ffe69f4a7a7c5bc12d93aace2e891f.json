{"ast":null,"code":"var _jsxFileName = \"/home/aditya/Documents/react/uno/src/Gamearea.js\";\nimport React, { Component } from 'react';\nimport './Game.css';\nimport { PacmanLoader } from 'react-spinners';\nimport { Avatar, withStyles } from '@material-ui/core';\nimport { AvatarGroup } from '@material-ui/lab';\nimport PropTypes from 'prop-types'; // import Websocket from 'ws';\n\nconst ws = new WebSocket('ws://localhost:3001/websocket');\nconst gamearea = {\n  display: 'grid',\n  'grid-template-columns': 'auto',\n  height: 'auto',\n  width: 'auto'\n};\nconst mid = {\n  display: 'grid',\n  'grid-template-columns': '33% 33% 33%'\n};\nconst playercard = {\n  'margin-left': '5px',\n  'margin-right': '5px',\n  'margin-top': '2px',\n  'margin-bottom': '2px'\n};\nconst player = {\n  position: 'relative',\n  width: '50%',\n  height: 'auto',\n  'margin-left': '25%',\n  'margin-right': '25%'\n};\nconst stack = {\n  width: '50%',\n  height: 'auto',\n  'margin-left': '25%',\n  'margin-right': '25%'\n};\n\nconst style = theme => ({\n  square: {\n    height: '75px',\n    width: '50px',\n    'background-image': \"url('./cards/back-.png')\"\n  }\n});\n\nfunction others(props) {\n  if (!this.state.allusers.find(x => x.op = props).name) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: props + 'p',\n    style: {\n      width: '25%',\n      'marginLeft': '40%',\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 5\n    }\n  }, this.state.allusers.find(x => x.op = props).name), /*#__PURE__*/React.createElement(AvatarGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }, Array(this.state.opnum.find(this.state.allusers.find(x => x.op = props).name).num).fill().map((_, i) => /*#__PURE__*/React.createElement(Avatar, {\n    src: require('./cards/back-.png'),\n    classes: {\n      root: style().square\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 106\n    }\n  }))));\n}\n\nclass Gamearea extends Component {\n  constructor() {\n    super();\n\n    this.handlePlay = e => {\n      // var card=e.target;\n      console.log(e.target);\n      var card = e.target.id.split('-');\n\n      if (card[0] === 'black') {\n        this.putblackcard(card);\n      } else if (card[0] === this.state.tablecard.color || card[1] === this.state.tablecard.num) {\n        this.putcard(card);\n      } else if (this.state.tablecard.color === 'black') {\n        this.putcard(card);\n      }\n    };\n\n    this.nextturn = (turn, addcards) => {\n      if (turn === this.state.user) {\n        document.getElementsByClassName('playerp')[0].style.border = 'none';\n        document.getElementsByClassName('player')[0].style.pointerEvents = 'auto';\n\n        if ((this.state.tablecard.num === \"+2\" || this.state.tablecard.num === \"+4\") && addcards.length !== 0) {\n          this.drawTwoCards(addcards);\n          ws.send(JSON.stringify({\n            action: 'd2',\n            user: this.state.user\n          }));\n        } else if ((this.state.tablecard.num === \"+2\" || this.state.tablecard.num === \"+4\") && addcards.length === 0) {}\n      } else {\n        document.getElementsByClassName('player')[0].style.pointerEvents = 'none';\n      }\n    };\n\n    this.drawTwoCards = addcards => {\n      this.state.playercards.push(...addcards);\n      this.setState();\n    };\n\n    this.putblackcard = card => {\n      if (card[1] === \"W\") {\n        let userInput = prompt(\"What color do you want your Wild card to be?\", \"R, Y, G or B?\");\n\n        switch (userInput.toUpperCase()) {\n          case \"R\":\n            ws.send(JSON.stringify({\n              action: 'wplayed',\n              tablecard: {\n                num: \"W\",\n                color: \"red\"\n              },\n              played: this.state.user\n            }));\n            break;\n\n          case \"Y\":\n            ws.send(JSON.stringify({\n              action: 'wplayed',\n              tablecard: {\n                num: \"W\",\n                color: \"yellow\"\n              },\n              played: this.state.user\n            }));\n            break;\n\n          case \"G\":\n            ws.send(JSON.stringify({\n              action: 'wplayed',\n              tablecard: {\n                num: \"W\",\n                color: \"green\"\n              },\n              played: this.state.user\n            }));\n            break;\n\n          case \"B\":\n            ws.send(JSON.stringify({\n              action: 'wplayed',\n              tablecard: {\n                num: \"W\",\n                color: \"blue\"\n              },\n              played: this.state.user\n            }));\n            break;\n\n          default:\n            console.log('nothing');\n        }\n      } else if (this.state.playercards.filter(x => x.color === card[0] || x.num === card[1]).length === 0) {\n        let userInput = prompt(\"What color do you want your +4 card to be?\", \"R, Y, G or B?\");\n\n        switch (userInput.toUpperCase()) {\n          case \"R\":\n            ws.send(JSON.stringify({\n              action: '4played',\n              tablecard: {\n                num: \"+4\",\n                color: \"red\"\n              },\n              played: this.state.user\n            }));\n            break;\n\n          case \"Y\":\n            ws.send(JSON.stringify({\n              action: '4played',\n              tablecard: {\n                num: \"+4\",\n                color: \"yellow\"\n              },\n              played: this.state.user\n            }));\n            break;\n\n          case \"G\":\n            ws.send(JSON.stringify({\n              action: '4played',\n              tablecard: {\n                num: \"+4\",\n                color: \"green\"\n              },\n              played: this.state.user\n            }));\n            break;\n\n          case \"B\":\n            ws.send(JSON.stringify({\n              action: '4played',\n              tablecard: {\n                num: \"+4\",\n                color: \"blue\"\n              },\n              played: this.state.user\n            }));\n            break;\n\n          default:\n            console.log('nothing');\n        }\n      }\n\n      this.state.playercards = this.state.playercards.filter(obj => {\n        if (obj.num !== card[1] && obj.color !== card[0]) {\n          return obj;\n        }\n      });\n      this.setState();\n\n      if (document.getElementsByClassName('player')[0].childNodes.length === 0) {\n        ws.send(JSON.stringify({\n          action: 'win',\n          user: this.state.user\n        }));\n      }\n    };\n\n    this.putcard = card => {\n      if (card[1] === 'R') {\n        ws.send(JSON.stringify({\n          action: 'rplayed',\n          tablecard: {\n            num: card[1],\n            color: card[0]\n          },\n          played: this.state.user\n        }));\n      } else if (card[1] === 'S') {\n        ws.send(JSON.stringify({\n          action: 'splayed',\n          tablecard: {\n            num: card[1],\n            color: card[0]\n          },\n          played: this.state.user\n        }));\n      } else if (card[1] === '+2') {\n        ws.send(JSON.stringify({\n          action: '2played',\n          tablecard: {\n            num: card[1],\n            color: card[0]\n          },\n          played: this.state.user\n        }));\n      } else {\n        ws.send(JSON.stringify({\n          action: 'played',\n          tablecard: {\n            num: card[1],\n            color: card[0]\n          },\n          played: this.state.user\n        }));\n      }\n\n      this.state.playercards = this.state.playercards.filter(obj => {\n        if (obj.num !== card[1] && obj.color !== card[0]) {\n          return obj;\n        }\n      });\n      this.setState();\n\n      if (document.getElementsByClassName('player')[0].childNodes.length === 0) {\n        ws.send(JSON.stringify({\n          action: 'win',\n          user: this.state.user\n        }));\n      }\n    };\n\n    this.ready = e => {\n      ws.send(JSON.stringify({\n        action: 'start',\n        user: this.state.user\n      }));\n      e.target.style.display = 'none';\n    };\n\n    this.state = {\n      playercards: [],\n      opnum: [],\n      loading: true,\n      user: '',\n      tablecard: {\n        num: '',\n        color: 'back'\n      },\n      allusers: []\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      user: this.props.user\n    });\n\n    ws.onopen = () => {\n      console.log('open');\n    };\n\n    ws.onmessage = data => {\n      console.log(data.data);\n      var res = JSON.parse(data.data);\n\n      if (res.action === \"startreturn\") {\n        console.log('startreturn');\n        this.state.playercards = res.cards;\n        this.state.tablecard = res.tablecard;\n        var x = 1;\n\n        for (var d of res.users) {\n          if (d !== this.state.user) {\n            this.state.allusers.push({\n              name: d,\n              op: 'op' + x\n            });\n            x++;\n          } else {\n            this.state.allusers.push({\n              name: d,\n              op: 'player'\n            });\n          }\n        }\n\n        console.log(this.state.allusers);\n\n        if (document.getElementsByClassName(this.state.allusers.find(x => x.name === res.turn).op + 'p')[0]) {\n          document.getElementsByClassName(this.state.allusers.find(x => x.name === res.turn).op + 'p')[0].style.border = 'solid green 3px';\n        }\n\n        console.log(this.state.opnum);\n        this.setState({\n          loading: false\n        });\n\n        if (res.turn === this.state.user) {\n          document.getElementsByClassName('player')[0].style.pointerEvents = 'auto';\n        } else {\n          document.getElementsByClassName('playerp')[0].style.border = 'none';\n          document.getElementsByClassName('player')[0].style.pointerEvents = 'none';\n        }\n\n        let i = 0;\n\n        for (let opnumwala = 0; opnumwala < 4; opnumwala++) {\n          if (!this.state.allusers[i].name) {\n            continue;\n          }\n\n          this.state.opnum.push({\n            name: this.state.allusers[i].name,\n            num: 7\n          });\n          i++;\n        }\n      } else if (res.action === \"nextturn\") {\n        this.state.tablecard = res.tablecard;\n        let i = 0;\n\n        for (var opnumwala of res.op) {\n          this.state.opnum.push({\n            name: this.state.allusers[i].name,\n            num: opnumwala\n          });\n          i++;\n        }\n\n        document.getElementsByClassName(this.state.allusers.find(x => x.name === res.turn).op + 'p')[0].style.border = 'solid green 3px';\n        this.setState();\n        this.nextturn(res.turn, res.addcards);\n      } else if (res.action === \"win\") {\n        this.win(res.user);\n      } else if (res.action === \"retry\") {\n        ws.send(JSON.stringify({\n          action: 'start',\n          user: this.state.user\n        }));\n      } else if (res.action === \"drawrep\") {\n        this.state.opnum = res.op;\n\n        if (res.user === this.state.user) {\n          this.drawTwoCards(res.addcard);\n        }\n\n        this.setState();\n      }\n    };\n  }\n\n  render() {\n    const {\n      classes\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"gamearea\",\n      style: gamearea,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.ready,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 17\n      }\n    }, \"ready\"), /*#__PURE__*/React.createElement(PacmanLoader, {\n      color: \"yellow\",\n      css: \"margin-top:20%;margin-left:45%;\",\n      loading: this.state.loading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"gridItem\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"op1\",\n      style: {\n        transform: 'rotateZ(180deg)'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"others\", {\n      props: \"op1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"gridItem\",\n      id: \"mid\",\n      style: mid,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"op2\",\n      style: {\n        transform: 'rotateZ(90deg)'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"others\", {\n      props: \"op2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"stack\",\n      style: stack,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: require(\"./cards/\" + this.state.tablecard.color + \"-\" + this.state.tablecard.num + \".png\"),\n      style: {\n        height: '75px',\n        width: '50px'\n      },\n      id: this.state.tablecard.color + \"-\" + this.state.tablecard.num,\n      alt: \"cards/\" + this.state.tablecard.color + \"-\" + this.state.tablecard.num + \".png\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"img\", {\n      src: require(\"./cards/back-.png\"),\n      alt: 'deck',\n      style: {\n        height: '75px',\n        width: '50px',\n        background: 'black'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 29\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"op3\",\n      style: {\n        transform: 'rotateZ(270deg)'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"others\", {\n      props: \"op3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 21\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"gridItem\",\n      id: \"playerplace\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"playerp\",\n      style: {\n        width: '25%',\n        'marginLeft': '40%',\n        textAlign: 'center'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 21\n      }\n    }, this.state.user), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"player\",\n      style: player,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 21\n      }\n    }, this.state.playercards.map(data => {\n      return /*#__PURE__*/React.createElement(\"img\", {\n        src: require(\"./cards/\" + data.color + \"-\" + data.num + \".png\"),\n        style: {\n          height: '75px',\n          width: '50px'\n        },\n        id: data.color + \"-\" + data.num,\n        alt: \"cards/\" + data.color + \"-\" + data.num + \".png\",\n        onClick: this.handlePlay,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 37\n        }\n      });\n    }))));\n  }\n\n}\n\nGamearea.propTypes = {\n  classes: PropTypes.object.isRequired\n};\nexport default withStyles(style)(Gamearea);","map":{"version":3,"sources":["/home/aditya/Documents/react/uno/src/Gamearea.js"],"names":["React","Component","PacmanLoader","Avatar","withStyles","AvatarGroup","PropTypes","ws","WebSocket","gamearea","display","height","width","mid","playercard","player","position","stack","style","theme","square","others","props","state","allusers","find","x","op","name","textAlign","Array","opnum","num","fill","map","_","i","require","root","Gamearea","constructor","handlePlay","e","console","log","target","card","id","split","putblackcard","tablecard","color","putcard","nextturn","turn","addcards","user","document","getElementsByClassName","border","pointerEvents","length","drawTwoCards","send","JSON","stringify","action","playercards","push","setState","userInput","prompt","toUpperCase","played","filter","obj","childNodes","ready","loading","componentDidMount","onopen","onmessage","data","res","parse","cards","d","users","opnumwala","win","addcard","render","classes","transform","background","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './Game.css'\nimport { PacmanLoader } from 'react-spinners'\nimport { Avatar, withStyles } from '@material-ui/core'\nimport { AvatarGroup } from '@material-ui/lab'\nimport PropTypes from 'prop-types';\n// import Websocket from 'ws';\n\nconst ws=new WebSocket('ws://localhost:3001/websocket')\n\nconst gamearea={\n    display: 'grid',\n    'grid-template-columns': 'auto' ,\n    height: 'auto',\n    width: 'auto'\n}\nconst mid={\n    display: 'grid',\n    'grid-template-columns': '33% 33% 33%' \n}\nconst playercard={\n    'margin-left': '5px',\n    'margin-right': '5px',\n    'margin-top': '2px',\n    'margin-bottom': '2px'\n}\nconst player={\n    position: 'relative',\n    width: '50%',\n    height: 'auto',\n    'margin-left': '25%',\n    'margin-right': '25%'\n}\nconst stack={\n    width: '50%',\n    height: 'auto',\n    'margin-left': '25%',\n    'margin-right': '25%'\n}\n\nconst style=(theme)=>({\n    square: {\n        height:'75px',\n        width:'50px',\n        'background-image': \"url('./cards/back-.png')\"\n      }\n})\n\nfunction others(props){\n    if(!this.state.allusers.find(x=>x.op=props).name){return null}\n    return(<div>\n    <div className={props+'p'} style={{width:'25%','marginLeft':'40%',textAlign:'center'}}>{this.state.allusers.find(x=>x.op=props).name}</div>\n    <AvatarGroup>\n    {Array(this.state.opnum.find(this.state.allusers.find(x=>x.op=props).name).num).fill().map((_, i) => <Avatar src={require('./cards/back-.png')} classes={{root:style().square}}></Avatar>)}\n    </AvatarGroup></div>);\n}\n\nclass Gamearea extends Component {\n    constructor() {\n        super();\n        this.state = {\n            playercards:[],\n            opnum:[],\n            loading:true,\n            user:'',\n            tablecard:{num:'',color:'back'},\n            allusers:[]\n        }\n    }\n\n    componentDidMount(){\n        this.setState({user:this.props.user})\n\n        ws.onopen=()=>{\n            console.log('open')\n        }\n        ws.onmessage=(data)=>{\n            console.log(data.data);\n            var res=JSON.parse(data.data);\n            if(res.action === \"startreturn\"){\n                console.log('startreturn');\n                this.state.playercards=res.cards;\n                this.state.tablecard=res.tablecard;\n                var x=1;\n                for(var d of res.users){\n                    if(d!==this.state.user){\n                        this.state.allusers.push({name:d,op:'op'+x});\n                        x++;\n                    } else {\n                        this.state.allusers.push({name:d,op:'player'});\n                    }\n                }\n                console.log(this.state.allusers);\n                if(document.getElementsByClassName(this.state.allusers.find(x=>x.name===res.turn).op+'p')[0]){\n                document.getElementsByClassName(this.state.allusers.find(x=>x.name===res.turn).op+'p')[0].style.border='solid green 3px';\n                }\n                console.log(this.state.opnum);\n                this.setState({loading:false});\n                if(res.turn===this.state.user){\n                    document.getElementsByClassName('player')[0].style.pointerEvents = 'auto';\n                } else {\n                    document.getElementsByClassName('playerp')[0].style.border='none';\n                    document.getElementsByClassName('player')[0].style.pointerEvents = 'none';\n                }\n                let i=0;\n                for(let opnumwala=0;opnumwala<4;opnumwala++){\n                    if(!this.state.allusers[i].name){continue;}\n                    this.state.opnum.push({name:this.state.allusers[i].name,num:7})\n                    i++;\n                }\n            }\n            else if(res.action===\"nextturn\"){\n                this.state.tablecard=res.tablecard;\n                let i=0;\n                for(var opnumwala of res.op){\n                    this.state.opnum.push({name:this.state.allusers[i].name,num:opnumwala})\n                    i++;\n                }\n                document.getElementsByClassName(this.state.allusers.find(x=>x.name===res.turn).op+'p')[0].style.border='solid green 3px';\n                this.setState();\n                this.nextturn(res.turn,res.addcards);\n            }\n            else if(res.action===\"win\"){\n                this.win(res.user);\n            }\n            else if(res.action===\"retry\"){\n                ws.send(JSON.stringify({action:'start',user:this.state.user}));\n            }\n            else if(res.action===\"drawrep\"){\n                this.state.opnum=res.op;\n                if(res.user===this.state.user){\n                    this.drawTwoCards(res.addcard)\n                }\n                this.setState();\n            }\n        }\n\n    }\n\n    \n\n    handlePlay=(e)=>{\n        // var card=e.target;\n        console.log(e.target);\n        var card=e.target.id.split('-');\n        if(card[0]==='black'){\n            this.putblackcard(card);\n        } else if(card[0] === this.state.tablecard.color || card[1] === this.state.tablecard.num){\n            this.putcard(card);\n        } else if(this.state.tablecard.color==='black'){\n            this.putcard(card);\n        }\n        \n    }\n\n    nextturn=(turn,addcards)=>{\n        if(turn===this.state.user){\n            document.getElementsByClassName('playerp')[0].style.border='none';\n            document.getElementsByClassName('player')[0].style.pointerEvents = 'auto';\n            if((this.state.tablecard.num===\"+2\" || this.state.tablecard.num===\"+4\")  && addcards.length!==0){\n                this.drawTwoCards(addcards);\n                ws.send(JSON.stringify({action:'d2', user:this.state.user}));\n            }else if((this.state.tablecard.num===\"+2\" || this.state.tablecard.num===\"+4\") && addcards.length===0){\n            }\n        } else {\n            document.getElementsByClassName('player')[0].style.pointerEvents = 'none';\n        }\n    }\n\n    drawTwoCards=(addcards)=>{\n        this.state.playercards.push(...addcards);\n        this.setState();\n    }\n\n    putblackcard=(card)=>{\n        if (card[1] === \"W\") {\n            let userInput = prompt(\"What color do you want your Wild card to be?\", \"R, Y, G or B?\") ;\n            switch (userInput.toUpperCase()) {\n                case \"R\":\n                ws.send(JSON.stringify({action:'wplayed',tablecard:{num:\"W\",color:\"red\"},played:this.state.user}))\n                break ;\n                case \"Y\":\n                    ws.send(JSON.stringify({action:'wplayed',tablecard:{num:\"W\",color:\"yellow\"},played:this.state.user}))\n                break ;\n                case \"G\":\n                    ws.send(JSON.stringify({action:'wplayed',tablecard:{num:\"W\",color:\"green\"},played:this.state.user}))\n                break ;\n                case \"B\":\n                    ws.send(JSON.stringify({action:'wplayed',tablecard:{num:\"W\",color:\"blue\"},played:this.state.user}))\n                break ;\n                default : console.log('nothing');\n            }\n        } else if(this.state.playercards.filter(x=>x.color===card[0] || x.num === card[1]).length === 0){\n            let userInput = prompt(\"What color do you want your +4 card to be?\", \"R, Y, G or B?\") ;\n            switch (userInput.toUpperCase()) {\n                case \"R\":\n                ws.send(JSON.stringify({action:'4played',tablecard:{num:\"+4\",color:\"red\"},played:this.state.user}))\n                break ;\n                case \"Y\":\n                    ws.send(JSON.stringify({action:'4played',tablecard:{num:\"+4\",color:\"yellow\"},played:this.state.user}))\n                break ;\n                case \"G\":\n                    ws.send(JSON.stringify({action:'4played',tablecard:{num:\"+4\",color:\"green\"},played:this.state.user}))\n                break ;\n                case \"B\":\n                    ws.send(JSON.stringify({action:'4played',tablecard:{num:\"+4\",color:\"blue\"},played:this.state.user}))\n                break ;\n                default : console.log('nothing');\n            }\n        }\n        this.state.playercards = this.state.playercards.filter((obj) => {\n            if(obj.num !== card[1] && obj.color!==card[0]){\n                return obj;\n            }\n        });\n        this.setState();\n        if(document.getElementsByClassName('player')[0].childNodes.length===0){\n            ws.send(JSON.stringify({action:'win',user:this.state.user}));\n        }\n    }\n\n    putcard=(card)=>{\n        if(card[1] === 'R'){\n            ws.send(JSON.stringify({action:'rplayed',tablecard:{num:card[1],color:card[0]},played:this.state.user}));   \n        } else if( card[1]==='S'){\n            ws.send(JSON.stringify({action:'splayed',tablecard:{num:card[1],color:card[0]},played:this.state.user}));   \n        } else if(card[1] === '+2'){\n            ws.send(JSON.stringify({action:'2played',tablecard:{num:card[1],color:card[0]},played:this.state.user}));   \n        } else {\n            ws.send(JSON.stringify({action:'played',tablecard:{num:card[1],color:card[0]},played:this.state.user}));   \n        }\n        this.state.playercards = this.state.playercards.filter((obj) => {\n            if(obj.num !== card[1] && obj.color!==card[0]){\n                return obj;\n            }\n        });\n        this.setState();\n        if(document.getElementsByClassName('player')[0].childNodes.length===0){\n            ws.send(JSON.stringify({action:'win',user:this.state.user}));\n        }\n    }\n\n    ready=(e)=>{\n        ws.send(JSON.stringify({action:'start',user:this.state.user}))\n        e.target.style.display='none';\n    }    \n\n    render() {\n        const {classes} = this.props\n        return (\n            <div className='gamearea' style={gamearea}>\n                <button onClick={this.ready}>ready</button>\n                <PacmanLoader color='yellow' css='margin-top:20%;margin-left:45%;' loading={this.state.loading}></PacmanLoader>\n                <div className='gridItem'>\n                    <div className='op1' style={{transform:'rotateZ(180deg)'}}>\n                        <others props='op1'></others>\n                    </div>\n                </div>\n                <div className='gridItem' id='mid' style={mid}>\n                    <div className='op2' style={{transform:'rotateZ(90deg)'}}>\n                    <others props='op2'></others>\n                    </div>\n                    <div className='stack' style={stack}>\n                        <div>\n                            <img src={require(\"./cards/\"+this.state.tablecard.color+\"-\"+this.state.tablecard.num+\".png\")} style={{height:'75px',width:'50px'}} id={this.state.tablecard.color+\"-\"+this.state.tablecard.num} alt={\"cards/\"+this.state.tablecard.color+\"-\"+this.state.tablecard.num+\".png\"}></img>\n                            <img src={require(\"./cards/back-.png\")} alt={'deck'} style={{height:'75px',width:'50px',background:'black'}}></img>\n                        </div>\n                    </div>\n                    <div className='op3' style={{transform:'rotateZ(270deg)'}}>\n                    <others props='op3'></others>\n                    </div>\n                </div>\n                <div className='gridItem' id='playerplace'>\n                    <div className='playerp' style={{width:'25%','marginLeft':'40%',textAlign:'center'}}>{this.state.user}</div>\n                    <div className='player' style={player}>\n                        {this.state.playercards.map(data=>{\n                            return (<img src={require(\"./cards/\"+data.color+\"-\"+data.num+\".png\")} style={{height:'75px',width:'50px'}} id={data.color+\"-\"+data.num} alt={\"cards/\"+data.color+\"-\"+data.num+\".png\"} onClick={this.handlePlay}></img>)\n                        })}\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\nGamearea.propTypes = {\n    classes: PropTypes.object.isRequired,\n  };\n  export default withStyles(style)(Gamearea);"]},"metadata":{},"sourceType":"module"}